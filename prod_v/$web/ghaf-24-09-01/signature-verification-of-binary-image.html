<!DOCTYPE html>
<HTML lang="en">
<HEAD>
<TITLE>Directory Listing</TITLE>
<META charset="utf-8" />
<LINK rel="stylesheet" href="/base.css">
</HEAD>
<BODY>
<DIV>

<!DOCTYPE html>
<html>
    <!--
        SPDX-FileCopyrightText: 2022-2024 Technology Innovation Institute (TII)
        SPDX-License-Identifier: Apache-2.0
    -->
    <head>
        <title>Instructions for Signature Verification</title>
        <link rel="stylesheet" href="/base.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main">
                <div id="main-header">
                    <h1 id="title-heading">
                        <span id="title-text">
                            Instructions for Signature Verification of a Binary Image
                        </span>
                    </h1>
                </div>

                <div id="content">
                    <div id="main-content" class="wiki-content group">
                        <p>In this example we verify a signature of a Ghaf package. These steps can be applied to any Ghaf package. Notice that sometimes the binary image and the signature file are in sd-image directory.
                        </p>
                        <h3>Step-by-step instructions:</h3>
                        <ul>
                            <li>
                                <p>
                                    <strong>Download and extract the package in an empty directory</strong>
                                </p>
                                <div class="code panel pdl">
                                    <div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre">mkdir verify
cd verify
wget https://ghafreleasesstorage.z16.web.core.windows.net/ghaf-24-09-01/files-1/packages.x86_64-linux.lenovo-x1-carbon-gen11-debug.tar
tar -xf *.tar
cd packages.x86_64-linux.lenovo-x1-carbon-gen11-debug
</pre>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <p>
                                    <strong>Verify the signature</strong>
                                </p>
                                <div class="code panel pdl">
                                    <div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre">nix run github:tiiuae/ci-yubi/bdb2dbf#verify -- --path disk1.raw.zst --sigfile disk1.raw.zst.sig</pre>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <h3>Example output of successful signature verification</h3>
                        <div class="code panel pdl" style="margin-left: 30px; margin-right: 30px;">
                            <div class="codeContent panelContent pdl">
                              <pre class="syntaxhighlighter-pre">
[ktu@X1-nixos:~/verify/packages.x86_64-linux.lenovo-x1-carbon-gen11-debug]$ nix run github:tiiuae/ci-yubi/bdb2dbf#verify -- --path disk1.raw.zst --sigfile disk1.raw.zst.sig
Signature verification result: {'message': 'Signature Verification Result', 'is_valid': True}

</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
</DIV>
</BODY>
</HTML>
